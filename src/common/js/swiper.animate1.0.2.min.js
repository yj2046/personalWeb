//本插件由www.swiper.com.cn提供
//优化修改 by harx，2015-5-4

function swiperAnimateCache() {
    var allBoxes = document.documentElement.querySelectorAll(".ani")
        , l = allBoxes.length - 1
        , i = l;
    for (; i >= 0; i--) {
        var curEle = allBoxes[i],
            style = curEle.attributes['style'];

        style = style ? style.value : "",

            curEle.setAttribute("swiper-animate-style-cache", style),
            curEle.style.visibility = "hidden"

    }

}
function swiperAnimate(a) {

    clearSwiperAnimate(a.slides[a.previousIndex]);

    var b = a.slides[a.activeIndex].querySelectorAll(".ani")
        , l = b.length - 1
        , i = l
        ;

    for (; i >= 0; i--) {
        var curEle = b[i],
            effect = curEle.attributes["swiper-animate-effect"],
            duration = curEle.attributes["swiper-animate-duration"],
            delay = curEle.attributes["swiper-animate-delay"],
            style = b[i].attributes["style"].value;

        effect = effect ? ' ' + effect.value : ""
            , curEle.className = curEle.className + effect + " animated"

            , duration = duration ? duration.value : ""
            , duration && (style = style + "animation-duration:" + duration + ";-webkit-animation-duration:" + duration + ";")

            , delay = delay ? delay.value : ""
            , delay && (style = style + "animation-delay:" + delay + ";-webkit-animation-delay:" + delay + ";")

            , style = style + "visibility:visible;"
            , curEle.setAttribute('style', style);

    }

}
function clearSwiperAnimate(ele) {
    var allBoxes = ele.querySelectorAll('.ani')
        , l = allBoxes.length - 1
        , i = l
        ;

    for (; i >= 0; i--) {
        var curEle = allBoxes[i]
            , cache = curEle.attributes["swiper-animate-style-cache"]
            , effect = curEle.attributes["swiper-animate-effect"]
            ;

        cache && curEle.setAttribute("style", cache.value)
            , curEle.style.visibility = "hidden"
            , effect
            ? curEle.className = curEle.className.replace(" animated", "").replace(' ' + effect.value, "")
            : curEle.className = curEle.className.replace(" animated", "")

    }
}
